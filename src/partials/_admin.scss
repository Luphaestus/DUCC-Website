@use "mixins" as *;

/* Admin Layout */
#admin-view {
    width: 100%;
    padding: 2rem;
    overflow-x: hidden;
    @media (max-width: 576px) { padding: 2rem 0.5rem 0.5rem 0.5rem; }
    @media (max-width: 466px) { padding: 2rem .4rem; }

    h1 { text-align: center; font-size: 1.5rem; word-wrap: break-word; }
    &>div { width: 100%; overflow-x: auto; }
}

/* Controls & Toolbar */
.admin-controls-container { display: flex; flex-direction: column; width: 100%; }
.admin-nav-row { width: 100%; }
.admin-nav-group {
    display: flex; gap: 0.5rem; flex-wrap: wrap;
    button { @include common-element-size; margin-bottom: 0; white-space: nowrap; }
}

.admin-tools-row {
    display: flex; justify-content: space-between; align-items: center; gap: 0.5rem; position: relative; flex-wrap: wrap;
    margin-top: 1rem; margin-bottom: 1rem; margin-left: 0 !important; margin-right: 0 !important;
}

.admin-actions {
    display: flex; gap: 0.5rem;
    button { @include common-element-size; margin-bottom: 0; white-space: nowrap; }
}

/* Search Wrapper */
.search-input-wrapper {
    @include common-element-size; padding: 0 !important; flex: 1 1 100px; position: relative; display: flex; align-items: center;
    input { width: 100%; padding-right: 2.8em !important; margin-bottom: 0; }
    button {
        position: absolute; right: 0.55rem; top: 50%; transform: translateY(-50%);
        background: transparent !important; border: none !important; padding: 0.25rem; margin: 0;
        color: var(--pico-color) !important; display: flex; align-items: center; justify-content: center;
        opacity: 0.5; transition: opacity 0.2s; width: 1.7em !important; height: 1.7em !important;
        &:hover { opacity: 1; box-shadow: none; background: transparent !important; }
        svg { width: 1.3em !important; height: 1.3em !important; fill: var(--theme-opposite); }
    }
}

/* Floating Filter Panel */
.filter-panel {
    position: absolute; top: 100%; right: 0; margin-top: 0.5rem; z-index: 1000;
    background-color: var(--pico-card-background-color); border: 1px solid var(--muted-border-color);
    border-radius: var(--border-radius); padding: 1rem; width: 300px; min-width: 250px;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    &.hidden { display: none; }
    .grid { display: flex; flex-direction: column; gap: 0.5rem; }
    label { margin-bottom: 0.5rem; }
    @media (max-width: 500px) { width: calc(100vw - 2rem); right: auto; left: 0; }
}

/* Pagination */
#events-pagination, #users-pagination {
    display: flex; justify-content: center; align-items: center; gap: 1rem; margin-top: 1rem;
    .pagination-btn { padding: 0.5rem 1rem; margin: 0; width: auto; }
}

/* Admin Header Section */
.admin-header {
    display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; margin-bottom: 2rem;
    #admin-header-actions { justify-self: start; display: flex; align-items: center; }
    h1 { margin-bottom: 0; text-align: center; white-space: nowrap; @media (max-width: 768px) { .admin-title-prefix { display: none; } } }
    #admin-header-extra { justify-self: end; }
}

/* User Tabs */
.user-detail-tabs { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; border-bottom: none; }

/* Transactions Management */
.transaction-add-box {
    margin-bottom: 1.5rem; padding: 1rem; background: var(--secondary-focus); border-radius: var(--border-radius); border: none;
    h4 { margin-top: 0; }
    .add-tx-form {
        display: flex; gap: 10px; align-items: center; flex-wrap: wrap;
        input[type="number"] { width: 150px; margin-bottom: 0; background-color: var(--card-bg-color); }
        input[type="text"] { flex-grow: 1; min-width: 200px; margin-bottom: 0; background-color: var(--card-bg-color); }
        button { margin-bottom: 0; }
    }
}

/* Admin Table Styling */
.admin-table {
    @include scaling-table(1200px, 992px, 800px);
    tbody { cursor: pointer; }
    th.sortable {
        cursor: pointer; transition: background-color 0.2s ease; white-space: nowrap;
        &:hover { background-color: var(--secondary-focus); }
        svg { width: 1rem; height: 1rem; flex-shrink: 0; display: inline-block; vertical-align: middle; margin-left: 0.5rem; margin-bottom: 0.2rem; fill: var(--pico-contrast); }
    }
    td .tx-actions, td .admin-row-actions {
        display: flex; flex-wrap: wrap; gap: 0.25rem;
        button { padding: 0.2rem 0.5rem; font-size: 0.8rem; margin-bottom: 0; }
    }
    @media (max-width: 466px) {
        th, td {
            &[data-label="First Aid"], &[data-label="Difficulty"], &[data-sort="first_aid_expiry"], &[data-sort="difficulty_level"] { display: none; }
        }
    }
}

.admin-row-actions {
    display: flex; gap: 0.5rem; align-items: center;
    .status-btn {
        margin: 0 !important; height: 2rem; min-width: 2.5rem; padding: 0; font-size: 0.8rem; line-height: 1;
        svg { width: 1.4rem; height: 1.4rem; display: block; }
    }
}

/* Tag Management */
.user-tags-list { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.user-tag-item {
    color: white; padding: 4px 8px; border-radius: 4px; display: flex; align-items: center; gap: 0.5rem;
    .remove-tag-btn, .remove-whitelist-btn {
        background: none; border: none; color: white; cursor: pointer; padding: 0; font-weight: bold; box-shadow: none; display: flex; align-items: center; justify-content: center;
        &:hover { background: transparent; opacity: 0.8; }
        svg { width: 1.2rem; height: 1.2rem; }
    }
}

/* Permissions Grid */
.permissions-grid {
    display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 0.5rem;
    label {
        display: flex; align-items: flex-start; gap: 0.5rem; cursor: pointer; padding: 0.5rem; border-radius: var(--border-radius); background: var(--card-sectioning-background-color);
        input { margin-top: 0.3em; }
        div { display: flex; flex-direction: column; }
    }
}

/* Margin Resets & Utilities */
#new-tx-desc, #new-tx-amount, .tx-amount-input, .tx-actions, .tx-desc-input, .global-input, .tag-controls, .search-input-wrapper, #admin-add-tag-select, .admin-controls-container, .admin-nav-row, .admin-nav-group, .admin-actions { margin: 0 !important; }
.error-text { color: var(--del-color); }
.table-responsive { overflow-x: auto; width: 100%; margin: 0 !important; }
